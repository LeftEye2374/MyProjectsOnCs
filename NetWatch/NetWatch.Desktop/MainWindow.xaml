<Window x:Class="NetWatch.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding Title}" 
        Height="600" 
        Width="900"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#FF2D2D30" Padding="10">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="NetWatch Desktop" 
                           Foreground="White" 
                           FontSize="18" 
                           FontWeight="Bold"/>
                <TextBlock Text="{Binding StatusMessage}" 
                           Foreground="LightGray" 
                           FontSize="14" 
                           Margin="20,0,0,0"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>

            <!-- Device List -->
            <DataGrid Grid.Column="0"
                      ItemsSource="{Binding Devices}"
                      SelectedItem="{Binding SelectedDevice}"
                      AutoGenerateColumns="True"
                      IsReadOnly="True"
                      Margin="10"/>

            <!-- Control Panel -->
            <Border Grid.Column="1" 
                    Background="#FFF0F0F0" 
                    BorderThickness="1,0,0,0"
                    BorderBrush="LightGray">
                <StackPanel Margin="10" VerticalAlignment="Top">
                    <Button Command="{Binding StartScanCommand}"
                            Height="40"
                            FontWeight="Bold"
                            IsEnabled="{Binding IsNotScanning}">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Content" Value="Start Scan"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsScanning}" Value="True">
                                        <Setter Property="Content" Value="Scanning..."/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>

                    <Separator Margin="0,20,0,10"/>

                    <TextBlock Text="Device Actions:" 
                               FontWeight="Bold"
                               Margin="0,0,0,5"/>

                    <Button Content="Refresh List" 
                            Command="{Binding RefreshDeviceListCommand}"
                            Margin="0,5"
                            Height="30"/>

                    <Button Content="Show Details" 
                            Command="{Binding ShowDeviceDetailsCommand}"
                            Margin="0,5"
                            Height="30"/>

                    <Button Content="Mark as Trusted" 
                            Command="{Binding MarkDeviceAsTrustedCommand}"
                            Margin="0,5"
                            Height="30"/>

                    <Button Content="Delete Device" 
                            Command="{Binding DeleteSelectedDeviceCommand}"
                            Margin="0,5"
                            Height="30"
                            Background="#FFFF4444"
                            Foreground="White"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Background="#FF007ACC">
            <StatusBarItem>
                <TextBlock Foreground="White" 
                           Text="{Binding Devices.Count, StringFormat='Devices: {0}'}"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem HorizontalAlignment="Right">
                <ProgressBar Width="100" 
                             Height="16" 
                             IsIndeterminate="True"
                             Visibility="{Binding IsScanning, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>